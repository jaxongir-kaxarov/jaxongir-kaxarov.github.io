---
title: Написание новой статьи
author:
  - cotes
  - yorenwyl
date: 2025-03-26 02:04:00 +0500
categories: [Blog, Обучение]
tags: [Chirpy]
render_with_liquid: false
image:
  path: /assets/img/articles/2025-03-26-mant-va-tipografiya/writing.png
lang: ru-RU
---

Это руководство покажет вам, как писать статьи в шаблоне _Chirpy_. Даже если вы раньше использовали Jekyll, стоит ознакомиться — для многих возможностей требуются специальные переменные.

## Именование и путь

Создайте новый файл с именем `YYYY-MM-DD-TITLE.EXTENSION`{: .filepath} и поместите его в каталог `_posts`{: .filepath} в корне. Помните, что `EXTENSION`{: .filepath} должен быть одним из `md`{: .filepath} или `markdown`{: .filepath}. Если хотите экономить время при создании файлов, рассмотрите использование плагина [`Jekyll-Compose`](https://github.com/jekyll/jekyll-compose).

## Front Matter

В основном вам нужно заполнить следующий [Front Matter](https://jekyllrb.com/docs/front-matter/) в верхней части поста:

```yaml
---
title: TITLE
date: YYYY-MM-DD HH:MM:SS +/-TTTT
categories: [TOP_CATEGORY, SUB_CATEGORY]
tags: [TAG]     # Имена тегов всегда должны быть в нижнем регистре
---
```

> По умолчанию layout поста установлен в `post`, поэтому нет необходимости добавлять переменную _layout_ в блок Front Matter.
{: .prompt-tip }

### Дата и часовой пояс

Чтобы точно указать время публикации, помимо установки `timezone` в `_config.yml`{: .filepath}, укажите также часовой пояс в переменной `date` Front Matter. Формат: `+/-TTTT`, например `+0800`.

### Категории и теги

Переменная `categories` обычно предназначена для не более чем двух элементов, а `tags` может содержать любое количество элементов. Например:

```yaml
---
categories: [Животные, Насекомые]
tags: [пчела]
---
```

### Информация об авторе

Информация об авторе обычно не обязана указываться в Front Matter — по умолчанию она берётся из `social.name` и первой записи в `social.links` в конфигурационном файле. Но вы можете переопределить её следующим образом:

Добавьте данные об авторе в `_data/authors.yml` (если такого файла нет в вашем сайте, можно создать его):

```yaml
<author_id>:
  name: <полное имя>
  twitter: <twitter автора>
  url: <веб-сайт автора>
```
{: file="_data/authors.yml" }

Затем используйте `author` для одной записи или `authors` для нескольких:

```yaml
---
author: <author_id>                     # для одного автора
# или
authors: [<author1_id>, <author2_id>]   # для нескольких авторов
---
```

Стоит отметить, что ключ `author` также может указывать на несколько записей.

> Преимущество чтения информации об авторе из файла `_data/authors.yml`{: .filepath } в том, что на странице появится meta-тег `twitter:creator`, что улучшает поддержку [Twitter Cards](https://developer.twitter.com/en/docs/twitter-for-websites/cards/guides/getting-started#card-and-content-attribution) и полезно для SEO.
{: .prompt-info }

### Описание поста

По умолчанию первые слова поста используются для списка постов на главной, раздела _Further Reading_ и RSS-ленты. Если вы не хотите, чтобы автоматически сгенерированное описание использовалось, установите поле `description` в Front Matter:

```yaml
---
description: Краткое содержание поста.
---
```

Также `description` будет показано под заголовком поста на странице самого поста.

## Оглавление (TOC)

По умолчанию в правой панели поста отображается Оглавление (TOC). Чтобы отключить его глобально, откройте `_config.yml`{: .filepath} и установите `toc` в `false`. Чтобы отключить TOC для конкретного поста, добавьте в Front Matter:

```yaml
---
toc: false
---
```

## Комментарии

Глобальная настройка комментариев задаётся через опцию `comments.provider` в файле `_config.yml`{: .filepath}. После выбора провайдера комментариев комментарии включаются для всех постов.

Чтобы отключить комментарии для отдельного поста, добавьте в Front Matter:

```yaml
---
comments: false
---
```

## Медиа

В _Chirpy_ мы называем изображения, аудио и видео — медиа-ресурсами.

### Префикс URL

Иногда нужно задать повторяющийся префикс URL для нескольких ресурсов поста; это можно сделать с помощью параметров `cdn` и `media_subpath`.

- Если вы используете CDN для хранения медиа, укажите `cdn` в `_config.yml`{: .filepath}. URL-ы аватаров сайта и медиа-ресурсов постов будут иметь префикс домена CDN.

  ```yaml
  cdn: https://cdn.com
  ```
  {: file='_config.yml' .nolineno }

- Для задания префикса пути ресурсов для текущего поста/страницы установите `media_subpath` в front matter поста:

  ```yaml
  ---
  media_subpath: /path/to/media/
  ---
  ```
  {: .nolineno }

Опции `site.cdn` и `page.media_subpath` могут работать отдельно или вместе, что даёт гибкость в формировании итогового URL: `[site.cdn/][page.media_subpath/]file.ext`

### Изображения

#### Подпись

Добавьте курсивную строку сразу под изображением — это будет подпись, отображаемая под изображением:

```markdown
![img-description](/path/to/image)
_Подпись изображения_
```
{: .nolineno}

#### Размеры

Чтобы при загрузке изображений не нарушалось расположение контента, задавайте ширину и высоту для каждого изображения:

```markdown
![Desktop View](/assets/img/sample/mockup.png){: width="700" height="400" }
```
{: .nolineno}

> Для SVG рекомендуется явно указывать как минимум его _width_, иначе он может не отображаться.
{: .prompt-info }

Начиная с _Chirpy v5.0.0_, поддерживаются сокращённые атрибуты `height` и `width` (`height` → `h`, `width` → `w`). Следующий пример эквивалентен предыдущему:

```markdown
![Desktop View](/assets/img/sample/mockup.png){: w="700" h="400" }
```
{: .nolineno}

#### Позиция

По умолчанию изображение центрировано, но вы можете задать позицию с помощью классов `normal`, `left` или `right`.

> После задания позиции подпись к изображению не должна добавляться.
{: .prompt-warning }

- **Обычная позиция**

  В примере ниже изображение выровнено влево:

  ```markdown
  ![Desktop View](/assets/img/sample/mockup.png){: .normal }
  ```
  {: .nolineno}

- **Плавает влево**

  ```markdown
  ![Desktop View](/assets/img/sample/mockup.png){: .left }
  ```
  {: .nolineno}

- **Плавает вправо**

  ```markdown
  ![Desktop View](/assets/img/sample/mockup.png){: .right }
  ```
  {: .nolineno}

#### Тёмный/светлый режим

Вы можете адаптировать изображения под тёмную/светлую тему: подготовьте два изображения — для тёмного и для светлого режима — и назначьте им специальные классы (`dark` или `light`):

```markdown
![Только для светлой темы](/path/to/light-mode.png){: .light }
![Только для тёмной темы](/path/to/dark-mode.png){: .dark }
```

#### Тень

Скриншоты окон приложений можно снабдить эффектом тени:

```markdown
![Desktop View](/assets/img/sample/mockup.png){: .shadow }
```
{: .nolineno}

#### Превью изображения (опен-грaф/preview)

Если вы хотите добавить изображение в верхнюю часть поста (preview), предоставьте изображение размером `1200 x 630`. Если соотношение сторон не совпадает с `1.91 : 1`, изображение будет масштабировано и обрезано.

Зная это, вы можете настроить атрибуты изображения в Front Matter:

```yaml
---
image:
  path: /path/to/image
  alt: альтернативный текст изображения
---
```

Учтите, что [`media_subpath`]\(\#url-prefix\) также применим к preview-изображениям: когда он задан, `path` может содержать только имя файла изображения.

Для простоты можно использовать `image`, указав только путь:

```yml
---
image: /path/to/image
---
```

#### LQIP

Для preview-изображений:

```yaml
---
image:
  lqip: /path/to/lqip-file # или base64 URI \"[Text and Typography](../text-and-typography/)\"
---
```

Вы можете увидеть LQIP в превью поста "[Текст и типографика](../mant-va-tipografiya/)".

Для обычных изображений:

```markdown
![Описание изображения](/path/to/image){: lqip="/path/to/lqip-file" }
```
{: .nolineno }

### Видео

#### Платформы социальных медиа

Вы можете встраивать видео с платформ с помощью следующего синтаксиса:

```liquid
{% include embed/{Platform}.html id='{ID}' %}
```

Здесь `Platform` — название платформы в нижнем регистре, а `ID` — идентификатор видео.

В таблице ниже показано, как извлечь нужные параметры из URL видео, а также перечислены поддерживаемые платформы.

| Video URL                                                                                          | Платформа   | ID             |
| -------------------------------------------------------------------------------------------------- | ---------- | :------------- |
| [https://www.**youtube**.com/watch?v=**H-B46URT4mg**](https://www.youtube.com/watch?v=H-B46URT4mg) | `youtube`  | `H-B46URT4mg`  |
| [https://www.**twitch**.tv/videos/**1634779211**](https://www.twitch.tv/videos/1634779211)         | `twitch`   | `1634779211`   |
| [https://www.**bilibili**.com/video/**BV1Q44y1B7Wf**](https://www.bilibili.com/video/BV1Q44y1B7Wf) | `bilibili` | `BV1Q44y1B7Wf` |

#### Видеофайлы

Если вы хотите встроить видеоплеер для локального видео-файла, используйте синтаксис:

```liquid
{% include embed/video.html src='{URL}' %}
```

Здесь `URL` — путь к видео, например `/path/to/sample/video.mp4`.

Для встраиваемого видео можно указать дополнительные атрибуты. Ниже приведён полный список разрешённых атрибутов.

- `poster='/path/to/poster.png'` — постерное изображение, показываемое до загрузки видео
- `title='Текст'` — заголовок видео, отображается под видео и стилистически совпадает с подписями изображений
- `autoplay=true` — попытаться начать воспроизведение автоматически
- `loop=true` — зациклить воспроизведение
- `muted=true` — звук отключён по умолчанию
- `types` — укажите дополнительные форматы через `|`. Убедитесь, что эти файлы находятся в том же каталоге, что и основное видео.

Пример, использующий все перечисленные атрибуты:

```liquid
{%
  include embed/video.html
  src='/path/to/video.mp4'
  types='ogg|mov'
  poster='poster.png'
  title='Демо видео'
  autoplay=true
  loop=true
  muted=true
%}
```

### Аудиофайлы

Если вы хотите встроить аудиоплеер для аудиофайла, используйте:

```liquid
{% include embed/audio.html src='{URL}' %}
```

Здесь `URL` — путь к аудиофайлу, например `/path/to/audio.mp3`.

Для аудио также доступны дополнительные атрибуты:

- `title='Текст'` — заголовок аудио, отображается под плеером
- `types` — укажите дополнительные форматы через `|`. Убедитесь, что эти файлы находятся в том же каталоге, что и основной аудиофайл.

Пример с полным набором атрибутов:

```liquid
{%
  include embed/audio.html
  src='/path/to/audio.mp3'
  types='ogg|wav|aac'
  title='Демо аудио'
%}
```

## Закреплённые посты

Вы можете закреплять один или несколько постов в верхней части главной страницы; закреплённые посты сортируются в обратном порядке по дате публикации. Для включения:

```yaml
---
pin: true
---
```

## Указания (prompts)

Существует несколько типов указаний: `tip`, `info`, `warning` и `danger`. Их можно создать, добавив соответствующий класс `prompt-{type}` к blockquote. Например, указание типа `info` определяется так:

```md
> Пример строки для указания.
{: .prompt-info }
```
{: .nolineno }

## Синтаксис

### Встроенный код

```md
`inline код`
```
{: .nolineno }

### Выделение пути к файлу

```md
`/path/to/a/file.extend`{: .filepath}
```
{: .nolineno }

### Кодовый блок

Markdown-блоки, создаваемые с помощью ```` ``` ```` позволяют легко вставлять фрагменты кода:

````md
```
Это простой текстовый фрагмент кода.
```
````

#### Указание языка

Используйте ```` ```{language} ```` для подсветки синтаксиса в код-блоках:

````markdown
```yaml
key: value
```
````

> Jekyll-тег `{% highlight %}` не совместим с этой темой.
{: .prompt-danger }

#### Нумерация строк

По умолчанию нумерация строк отображается для всех языков, кроме `plaintext`, `console` и `terminal`. Чтобы скрыть нумерацию строк, добавьте класс `nolineno` к блоку кода:

````markdown
```shell
echo 'Никакой нумерации строк!'
```
{: .nolineno }
````

#### Указание имени файла

Вы могли заметить, что над код-блоком иногда отображается имя файла. Чтобы задать собственное имя файла, добавьте атрибут `file`:

````markdown
```shell
# content
```
{: file="path/to/file" }
````

#### Код в Liquid в Front Matter

Параметр `render_with_liquid: false` отключает обработку Liquid-шаблонов Jekyll для этого файла. Это означает, что любые Liquid-теги (`{{ }}`, `{% %}`) или другая синтаксис Liquid не будут выполнены и останутся как обычный текст. Это полезно, когда нужно показать код Liquid или избежать его обработки.

#### Отображение кода Liquid

Если нужно показать фрагмент Liquid-кода, оберните его в `{% raw %}` и `{% endraw %}`:

````markdown
{% raw %}
```liquid
{% if product.title contains 'Pack' %}
  This product's title contains the word Pack.
{% endif %}
```
{% endraw %}
````

Или установите `render_with_liquid: false` в YAML-блоке поста (требуется Jekyll 4.0 или выше).

## Математика

Мы используем [**MathJax**][mathjax] для отображения математических формул. По соображениям производительности функция математики по умолчанию выключена, но вы можете включить её:

[mathjax]: https://www.mathjax.org/

```yaml
---
math: true
---
```

После включения можно добавлять математические выражения следующими способами:

- **Блочная математика** должна быть взята в `$$ math $$`; перед и после блока `$$` обязательна пустая строка.
  - **Нумерование уравнений**: используйте `$$\begin{equation} math \end{equation}$$`.
  - **Ссылка на номер уравнения**: добавьте в блок `\label{eq:label_name}` и ссылку в тексте `\eqref{eq:label_name}` (см. пример ниже).
- **Inline-математика** (в строке) тоже оборачивается в `$$ math $$`, но без пустых строк перед и после.
- **Inline-математика в списках**: первый `$` нужно экранировать.

```markdown
<!-- Блочная математика: сохраните все пустые строки -->

$$
LaTeX_math_expression
$$

<!-- Нумерация уравнения: сохраните все пустые строки  -->

$$
\begin{equation}
  LaTeX_math_expression
  \label{eq:label_name}
\end{equation}
$$

Can be referenced as \eqref{eq:label_name}.

<!-- Inline-математика в строках, без пустых строк -->

"Lorem ipsum dolor sit amet, $$ LaTeX_math_expression $$ consectetur adipiscing elit."

<!-- Inline-математика в списках, экранируйте первый `$` -->

1. \$$ LaTeX_math_expression $$
2. \$$ LaTeX_math_expression $$
3. \$$ LaTeX_math_expression $$
```

> Начиная с `v7.0.0`, настройки MathJax перенесены в файл `assets/js/data/mathjax.js`{: .filepath }, и вы можете изменять параметры (например, добавлять расширения) при необходимости.  
> Если вы собираете сайт через `chirpy-starter`, скопируйте этот файл из каталога установки gem (узнать путь можно командой `bundle info --path jekyll-theme-chirpy`) в соответствующий каталог репозитория.
{: .prompt-tip }

[mathjax-exts]: https://docs.mathjax.org/en/latest/input/tex/extensions/index.html

## Mermaid

[**Mermaid**](https://github.com/mermaid-js/mermaid) — удобный инструмент для создания диаграмм. Чтобы включить его в посте, добавьте в YAML-блок:

```yaml
---
mermaid: true
---
```

Дальше используйте его как любой другой язык разметки: оборачивайте код диаграммы в ```` ```mermaid ```` и ```` ``` ````.

## Дополнительная информация

Для получения дополнительной информации о постах Jekyll смотрите [Jekyll Docs: Posts](https://jekyllrb.com/docs/posts/).

